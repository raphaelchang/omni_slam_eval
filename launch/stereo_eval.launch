<launch>
    <arg name="bag_file" default="" />
    <arg name="results_file" default="$(arg bag_file).stereo.hdf5" />
    <arg name="camera_model" default="double_sphere" />
    <arg name="camera_params" default="{fx: 295.936, fy: 295.936, cx: 512, cy: 512, chi: 0.3, alpha: 0.6666667}" />
    <arg name="rate" default="1" />
    <node pkg="omni_slam_eval" type="omni_slam_stereo_eval_node" name="omni_slam_stereo_eval_node" required="true" output="screen">
        <param name="bag_file" value="$(arg bag_file)" />
        <param name="results_file" value="$(arg results_file)" />
        <param name="image_topic" value="/unity_ros/Sphere/FisheyeCamera/image_raw" />
        <param name="stereo_image_topic" value="/unity_ros/Sphere/FisheyeCamera2/image_raw" />
        <param name="depth_image_topic" value="/unity_ros/Sphere/FisheyeDepthCamera/image_raw" />
        <param name="pose_topic" value="/unity_ros/Sphere/TrueState/pose" />
        <param name="stereo_matched_topic" value="/omni_slam/stereo_matched" />
        <param name="rate" value="$(arg rate)" />
        <rosparam subst_value="true">
            camera_model: '$(arg camera_model)'
            camera_parameters: $(arg camera_params)
            detector_type: 'GFTT'
            detector_parameters: {maxCorners: 1000, qualityLevel: 0.001, minDistance: 5, blockSize: 5}
            stereo_matcher_window_size: 256
            stereo_matcher_num_scales: 5
            stereo_matcher_error_threshold: 20
            stereo_matcher_epipolar_threshold: 0.008
            stereo_tf_t: [2.0, 0.0, 0.0]
            stereo_tf_r: [0.0, 0.0, 0.0, 1.0]
        </rosparam>
    </node>
</launch>




